<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Credit card fraud detection tool (US)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

    :root {
      --bg-1: #0b1020;
      --bg-2: #111a33;
      --panel: rgba(255, 255, 255, 0.92);
      --panel-strong: #ffffff;
      --primary: #3b82f6;
      --primary-dark: #1d4ed8;
      --accent: #22c55e;
      --warning: #f59e0b;
      --danger: #ef4444;
      --text: #0f172a;
      --muted: #64748b;
      --line: #dbe3ef;
      --radius: 16px;
      --radius-lg: 22px;
      --shadow: 0 14px 40px rgba(2, 6, 23, 0.18);
      --shadow-soft: 0 8px 22px rgba(15, 23, 42, 0.08);
      --focus: 0 0 0 4px rgba(59, 130, 246, 0.16);
    }

    * { box-sizing: border-box; }

    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      min-height: 100vh;
      color: var(--text);
      background:
        radial-gradient(circle at 12% 12%, rgba(59,130,246,0.20), transparent 38%),
        radial-gradient(circle at 88% 18%, rgba(34,197,94,0.15), transparent 35%),
        linear-gradient(160deg, var(--bg-1), var(--bg-2));
      padding: 28px 18px 40px;
    }

    .page {
      max-width: 1100px;
      margin: 0 auto;
    }

    .hero {
      display: grid;
      grid-template-columns: 1.2fr 0.8fr;
      gap: 22px;
      align-items: stretch;
      margin-bottom: 22px;
    }

    .hero-card {
      background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,0.90));
      border: 1px solid rgba(255,255,255,0.5);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow);
      padding: 26px;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(6px);
    }

    .hero-card::before {
      content: "";
      position: absolute;
      width: 220px;
      height: 220px;
      right: -60px;
      top: -60px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(59,130,246,0.18), transparent 65%);
      pointer-events: none;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 7px 12px;
      border-radius: 999px;
      background: rgba(59, 130, 246, 0.1);
      color: var(--primary-dark);
      font-size: 0.82rem;
      font-weight: 600;
      margin-bottom: 12px;
      border: 1px solid rgba(59,130,246,0.18);
    }

    .badge::before {
      content: "";
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--accent);
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.14);
    }

    h1 {
      margin: 0 0 8px 0;
      font-size: clamp(1.35rem, 2vw, 2rem);
      line-height: 1.15;
      font-weight: 700;
      color: #0f172a;
      letter-spacing: -0.02em;
    }

    p.sub {
      margin: 0;
      color: var(--muted);
      font-size: 0.97rem;
      line-height: 1.5;
      max-width: 62ch;
    }

    .hero-mini {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 180px;
      background: linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
      border: 1px solid rgba(255,255,255,0.16);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
      padding: 20px;
    }

    /* Decorative credit card (CSS only, no image) */
    .credit-card-visual {
      width: min(100%, 340px);
      aspect-ratio: 1.58 / 1;
      border-radius: 18px;
      position: relative;
      overflow: hidden;
      background:
        radial-gradient(circle at 20% 20%, rgba(255,255,255,0.26), transparent 45%),
        radial-gradient(circle at 85% 85%, rgba(34,197,94,0.20), transparent 45%),
        linear-gradient(135deg, #1e3a8a, #2563eb 45%, #0f172a 100%);
      box-shadow:
        0 14px 28px rgba(0,0,0,0.28),
        inset 0 1px 0 rgba(255,255,255,0.22);
      transform: rotate(-3deg);
    }

    .credit-card-visual::before,
    .credit-card-visual::after {
      content: "";
      position: absolute;
      border-radius: 50%;
      opacity: 0.9;
      filter: blur(0.2px);
    }

    .credit-card-visual::before {
      width: 120px;
      height: 120px;
      right: 26px;
      top: 28px;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.14);
    }

    .credit-card-visual::after {
      width: 80px;
      height: 80px;
      right: 54px;
      top: 48px;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.10);
    }

    .cc-chip {
      position: absolute;
      left: 24px;
      top: 28px;
      width: 42px;
      height: 32px;
      border-radius: 8px;
      background: linear-gradient(180deg, #fde68a, #eab308);
      border: 1px solid rgba(255,255,255,0.4);
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.08);
    }

    .cc-chip::before,
    .cc-chip::after {
      content: "";
      position: absolute;
      background: rgba(0,0,0,0.14);
    }

    .cc-chip::before {
      width: 1px;
      height: 100%;
      left: 50%;
      top: 0;
      transform: translateX(-50%);
    }

    .cc-chip::after {
      height: 1px;
      width: 100%;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
    }

    .cc-brand {
      position: absolute;
      right: 24px;
      top: 26px;
      color: rgba(255,255,255,0.95);
      font-weight: 600;
      font-size: 0.85rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .cc-number {
      position: absolute;
      left: 24px;
      right: 24px;
      top: 82px;
      color: rgba(255,255,255,0.95);
      font-weight: 600;
      letter-spacing: 0.14em;
      font-size: 1.02rem;
      text-shadow: 0 1px 1px rgba(0,0,0,0.24);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .cc-footer {
      position: absolute;
      left: 24px;
      right: 24px;
      bottom: 18px;
      display: flex;
      justify-content: space-between;
      gap: 16px;
      color: rgba(255,255,255,0.92);
      font-size: 0.72rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .cc-footer span strong {
      display: block;
      margin-top: 4px;
      letter-spacing: 0.04em;
      font-size: 0.84rem;
      color: white;
      text-transform: none;
      font-weight: 600;
    }

    form {
      background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.95));
      border: 1px solid rgba(255,255,255,0.7);
      padding: 22px;
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
      position: relative;
      overflow: hidden;
    }

    form::before {
      content: "";
      position: absolute;
      inset: 0 0 auto 0;
      height: 5px;
      background: linear-gradient(90deg, var(--primary), #60a5fa, #34d399);
    }

    .form-title {
      margin: 2px 0 16px;
      font-size: 1rem;
      color: #0f172a;
      font-weight: 700;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 16px;
    }

    .field {
      background: #fff;
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 12px;
      box-shadow: var(--shadow-soft);
    }

    label {
      display: block;
      font-weight: 600;
      font-size: 0.9rem;
      color: #1e293b;
      margin-bottom: 8px;
      line-height: 1.3;
    }

    input[type="number"],
    select {
      width: 100%;
      padding: 11px 12px;
      border-radius: 12px;
      border: 1.6px solid #dbe3ef;
      background: #f8fafc;
      color: #0f172a;
      font-size: 0.95rem;
      font-family: inherit;
      transition: border-color .2s ease, box-shadow .2s ease, background .2s ease, transform .05s ease;
      outline: none;
    }

    input[type="number"]:focus,
    select:focus {
      border-color: #60a5fa;
      background: #ffffff;
      box-shadow: var(--focus);
    }

    input[type="number"]::placeholder {
      color: #94a3b8;
    }

    .actions {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }

    input[type="submit"] {
      border: none;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: #fff;
      padding: 13px 22px;
      min-width: 250px;
      border-radius: 14px;
      font-size: 0.98rem;
      font-weight: 700;
      cursor: pointer;
      letter-spacing: 0.01em;
      box-shadow: 0 10px 20px rgba(37, 99, 235, 0.28);
      transition: transform .12s ease, box-shadow .2s ease, filter .2s ease;
    }

    input[type="submit"]:hover {
      transform: translateY(-2px);
      box-shadow: 0 14px 24px rgba(37, 99, 235, 0.34);
      filter: brightness(1.03);
    }

    input[type="submit"]:active {
      transform: translateY(0);
    }

    .results-wrap {
      max-width: 1100px;
      margin: 16px auto 0;
      display: grid;
      gap: 12px;
    }

    h3.result {
      margin: 0;
      padding: 16px 18px;
      font-size: 1rem;
      line-height: 1.4;
      background: rgba(255,255,255,0.96);
      border-radius: 14px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(255,255,255,0.8);
      color: #0f172a;
      position: relative;
      overflow: hidden;
    }

    h3.result::before {
      content: "";
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 6px;
      background: linear-gradient(180deg, var(--warning), #f97316);
      border-radius: 14px 0 0 14px;
    }

    .result strong {
      color: #111827;
    }

    .helper-note {
      margin-top: 14px;
      text-align: center;
      color: rgba(255,255,255,0.82);
      font-size: 0.85rem;
    }

    @media (max-width: 900px) {
      .hero {
        grid-template-columns: 1fr;
      }

      .hero-mini {
        min-height: 160px;
      }

      .credit-card-visual {
        transform: none;
      }
    }

    @media (max-width: 560px) {
      body {
        padding: 16px 12px 28px;
      }

      .hero-card,
      form {
        padding: 16px;
      }

      .grid {
        grid-template-columns: 1fr;
        gap: 12px;
      }

      input[type="submit"] {
        width: 100%;
        min-width: 0;
      }

      .cc-number {
        font-size: 0.9rem;
      }
    }

    .btn-submit {
      background: var(--primary);
      padding: 16px 40px;
      border: none;
      color: #fff;
      font-size: 1.1rem;
      border-radius: 50px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 14px 0 rgba(37, 99, 235, 0.39);
    }

    .btn-submit:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(37, 99, 235, 0.23);
    }
    
    /* Result Styling */
    .result-card {
      margin-top: 20px;
      padding: 25px;
      border-radius: var(--radius);
      text-align: center;
      font-weight: 600;
      animation: slideUp 0.5s ease-out;
    }

    .fraud-alert {
      background: #fef2f2;
      border: 2px solid var(--danger);
      color: var(--danger);
    }

    .safe-alert {
      background: #f0fdf4;
      border: 2px solid var(--accent);
      color: var(--accent);
    }

    .none-alert {
      background: #f0fdf4;
      border: 2px solid var(--text-muted);
      color: var(--text-muted);
    }
  </style>
</head>

<body>
  <div class="page">

    <section class="hero">
      <div class="hero-card">
        <div class="badge">Fraud Risk Screening</div>
        <h1>Credit card fraud detection tool (US)</h1>
        <p class="sub">Introduce the parameters for credit card fraud detection and run a quick prediction using your trained model.</p>
      </div>

      <div class="hero-mini" aria-hidden="true">
        <div class="credit-card-visual">
          <div class="cc-chip"></div>
          <div class="cc-brand">SecureCheck</div>
          <div class="cc-number">‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div>
          <div class="cc-footer">
            <span>Model<strong>Fraud Classifier</strong></span>
            <span>Status<strong>Ready</strong></span>
          </div>
        </div>
      </div>
    </section>

    <form action="/" method="post">
      <div class="grid">

        <div class="field-group">
          <label>üî¢ Card Number</label>
          <input type="number" min="0" max="1e16" step="1" name="val1" placeholder="xxxx xxxx xxxx xxxx" required>
        </div>

        <div class="field-group">
          <label>üë§ Cardholder Age</label>
          <input type="number" min="0" max="100" step="0.001" name="val3" placeholder="Enter age" required>
        </div>

        <div class="field-group">
          <label>‚è∞ Transaction Hour</label>
          <input type="number" min="0" max="23" step="1" name="val4" placeholder="0-23" required>
        </div>

        <div class="field-group">
          <label>üí∞ Amount (USD)</label>
          <input type="number" min="0" max="99999999" step="0.01" name="val5" placeholder="0.00" required>
        </div>

        <div class="field-group">
          <label>‚ö• Gender</label>
          <select name="val2" required>
            <option value="0">Female</option>
            <option value="1">Male</option>
          </select>
        </div>

        <div class="field-group">
          <label>üìÖ Month</label>
          <select name="val10" required>
            <option value="1">January</option>
            <option value="2">February</option>
            <option value="3">March</option>
            <option value="4">April</option>
            <option value="5">May</option>
            <option value="6">June</option>
            <option value="7">July</option>
            <option value="8">August</option>
            <option value="9">September</option>
            <option value="10">October</option>
            <option value="11">November</option>
            <option value="12">December</option>
          </select>
        </div>

      <div>
        <label for="category">Category</label>
        <select id="category" name="val6" required>
        <option value=0>Entertainment</option>
        <option value=1>Food & Dining</option>
        <option value=2>Gas & Transport</option>
        <option value=3>Grocery (online)</option>
        <option value=4>Grocery (store)</option>
        <option value=5>Health & Fitness</option>
        <option value=6>Home</option>
        <option value=7>Kids & Pets</option>
        <option value=8>Miscellaneous (online)</option>
        <option value=9>Miscellaneous (store)</option>
        <option value=10>Personal care</option>
        <option value=11>Shopping (online)</option>
        <option value=12>Shopping (store)</option>
        <option value=13>Travel</option>
        </select>
      </div>

        <div class="field-group">
          <label>üè¢ Merchant</label>
          <select name="val13" required>
            <option value="">-- Select merchant --</option>
            {% for merchant, value in merchant_data.items() %}
              <option value="{{ value }}">{{ merchant | replace("fraud_", "") }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="field-group">
          <label>üìç State</label>
          <select id="state" name="val12" required>
            <option value="">-- Select state --</option>
            {% for state in city_state_data.keys() %}
              <option value="{{ state }}">{{ state }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="field-group">
          <label>üèôÔ∏è City</label>
          <select id="city" name="val11" required>
            <option value="">-- Select city --</option>
          </select>
        </div>

      </div>

      <div class="actions">
        <button type="submit" class="btn-submit">Analyze Transaction üöÄ</button>
      </div>
    </form>
  </div>

  <div class="result-card 
          {% if pred_fraud == 'Fraudulent transaction' %}fraud-alert
          {% elif pred_fraud is none %}none-alert
          {% else %}safe-alert{% endif %}">
          
          {% if pred_fraud is not none %}
            <h3>
              {% if pred_fraud == 'Fraudulent transaction' %}
                ‚ùå Warning: Potential Fraud Detected
              {% else %}
                ‚úÖ Transaction Appears Legitimate
              {% endif %}
            </h3>
            <p>Analysis Result: {{ pred_fraud }}</p>
          {% else %}
            <h3>üïí Awaiting Analysis</h3>
            <p>Please enter transaction details and click Analyze.</p>
          {% endif %}
    </div>

  <div class="result-card 
          {% if pred_type is not none and pred_fraud == 'Fraudulent transaction' %}fraud-alert {% elif pred_type is not none and pred_fraud == 'Legitimate transaction' %}safe-alert {% else %}none-alert {% endif %}">
          
          {% if pred_type is not none %}
            <h3>üîç Transaction Classification</h3>
            <p>Category Type: {{ pred_type }}</p>
          {% else %}
            <h3>üìã Classification Pending</h3>
            <p>Category will appear after submission.</p>
          {% endif %}
  </div>
  <script>
    const cityStateData = {{ city_state_data | tojson }};
    const stateSelect = document.getElementById("state");
    const citySelect  = document.getElementById("city");

    stateSelect.addEventListener("change", function () {
      const selectedState = this.value;
      citySelect.innerHTML = '<option value="">-- Select city --</option>';

      if (selectedState && cityStateData[selectedState]) {
        cityStateData[selectedState].forEach(city => {
          const option = document.createElement("option");
          option.value = city;
          option.textContent = city;
          citySelect.appendChild(option);
        });
      }
    });
  </script>
</body>
</html>
